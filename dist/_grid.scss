// column layouts
// http://csswizardry.com/2013/02/responsive-grid-systems-a-solution/

@mixin sensibleGrid (
    $modern: false,
    $gutter: 20px,
    $base-font-size: 16px,
    $slug: "l-",
    $pushClasses: false,
    $gridWidths: (
        "one-whole"         : 100%,
        "one-half"          : 50%,
        "one-quarter"       : 25%,
        "three-quarters"    : 75%,
        "one-third"         : 33.333%,
        "two-thirds"        : 66.666%,
        "one-fifth"         : 20%,
        "four-fifths"       : 80%,
        "one-sixth"         : 16.666%,
        "five-sixths"       : 83.333%
    ),
    $gridBreakpoints: "mobile-portrait" "mobile" "not-mobile" "tablet-portrait" "tablet" "not-tablet"  "print"
) {
    %#{$slug}grid,
    .#{$slug}grid {
        @if $modern {
            font-size: 0.1px;
            margin-right: -$gutter;
        } @else {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }
    }
    %#{$slug}grid-cell,
    .#{$slug}grid-cell {
        @if $modern {
            display: inline-block;
            vertical-align: top;
            font-size: $base-font-size;
        }
        box-sizing: border-box;
        padding-right: $gutter;
    }


    //includes the default classes
    @include sensibleGridClasses($device: false, $slug: $slug, $pushClasses: $pushClasses, $gridWidths: $gridWidths);

    //includes the classes for the bereakpoints listed in $gridbreakpoints
    @each $breakpoint in $gridBreakpoints {
        @include breakpoint( $breakpoint ) {
            @include sensibleGridClasses( $breakpoint );
        }
    }
}

// generate classes for grid cells
@mixin sensibleGridClasses (
    $device: false,
    $slug: "l-",
    $pushClasses: false,
    $gridWidths: (
        "one-whole"         : 100%,
        "one-half"          : 50%,
        "one-quarter"       : 25%,
        "three-quarters"    : 75%
    )
) {
    $deviceString: null;

    @if $device {
        $deviceString: "#{$device}-";
    }

    // loops the $gridWiths map
    @each $gridWidth, $width in $gridWidths {
        %#{$slug}#{$deviceString}#{$gridWidth},
        .#{$slug}#{$deviceString}#{$gridWidth} {
            width: $width;
        }
        @if $pushClasses {
            %#{$slug}push-#{$deviceString}#{$gridWidth},
            .#{$slug}push-#{$deviceString}#{$gridWidth}{
                margin-left: $width;
            }
        }
    }
}
